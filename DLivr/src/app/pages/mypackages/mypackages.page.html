<ion-header>
    <ion-toolbar>
        <ion-buttons slot="start">
            <ion-menu-button color="light"></ion-menu-button>
          </ion-buttons>
      <ion-title>MY PACKAGES</ion-title>
    </ion-toolbar>
  </ion-header>
  
<!-- LIST OF PACKAGES -->
  <ion-content >
    <ion-grid id ="myPackages">
    <ion-row>
      <ion-col id = "cardList">
        <ion-card *ngFor = "let package of packages" id = "ion-card-id-package">
          <ion-card-content id ="ioncardcontent" no-padding>
          <ion-item id="cardListItem" lines="none" color="blue">
            <p class ="count" > {{package.number}} </p>
            <ion-label id ="cardListLabel">     
              <ion-card-header>
                <ion-card-title> {{package.name}} </ion-card-title>
              </ion-card-header>

              <ion-card-content> Status: {{package.status}} ***status </ion-card-content>
            </ion-label>

            <ion-button id = "ionButtonIcon" color ="--ion-color-success-shade" slot="end" (click)="editPackageForm(package.number)">
              <ion-icon name="create"></ion-icon>
            </ion-button>

            <ion-button id ="ionDeleteButton" color ="--ion-color-success-shade" slot="end" (click)="deletePackage(package.number)">
              <ion-icon name="trash"></ion-icon>
            </ion-button>

           </ion-item>
          </ion-card-content>
        </ion-card>
  
        <div id ="text" style="display: block;">
          <p id ="textP"> You don't have any package yet! </p>
        </div>

       </ion-col>
     </ion-row>

<!-- ADD PACKAGE FORM -->
  <div id = "addPackage" style="display: none;">
    <ion-row>
      <ion-col>
        <ion-card>                
          <ion-item id="addPackageItem" lines="none" color ="red">
           <p class ="count"> {{packages.length + 1}} </p>
           <ion-label>     
            <ion-card-header id ="addPackageHeader">
              <ion-card-title style="color: rgb(202, 201, 201);" id ="titleInfo"> Complete the info: </ion-card-title>
            </ion-card-header>
           </ion-label>
          </ion-item>
          
          <!--<form novalidate [formGroup] ="addPackageForm" (ngSubmit)="submitForm(form.value)"></form>-->
         <form novalidate [formGroup] ="addPackageForm" (ngSubmit)="submitForm()">
          <div padding>
            <p id = "formtext"> Package's Name </p> 
            <ion-item lines="none" class ="itemform">
              <ion-input formControlName = "packageName" name = "packageName" class ="inputClass" id = "nameInput" [(ngModel)]="name" type = "text" placeholder = "Package's Name" required></ion-input>
            </ion-item>

            <div  style="color:rgb(250, 146, 146); font-size: 12px;" class = "error-messages" *ngIf=" f.packageName.errors">
              <div *ngIf="f.packageName.errors.required && (f.packageName.touched || f.packageName.dirty)">* Package's name is required</div>
              <div *ngIf="f.packageName.errors.minlength && f.packageName.invalid">* Package's name must have at least 3 characters</div>
              <div *ngIf="f.packageName.errors.maxlength && f.packageName.invalid">* Package's name can't have more than 30 characters</div>
            </div>

            <p id = "formtext"> Pickup Address</p> 
            <ion-item lines="none" class ="itemform">
              <ion-input formControlName = "pickupAddress" name = "pickupAddress" class ="inputClass" id = "pickupAddressInput" [(ngModel)]="pickupAddress" type = "text" placeholder = "Pickup Address" required></ion-input>
            </ion-item>

            <div  style="color:rgb(250, 146, 146); font-size: 12px;" class = "error-messages" *ngIf=" f.pickupAddress.errors">
              <div *ngIf="f.pickupAddress.errors.required && (f.pickupAddress.touched || f.pickupAddress.dirty)">* Pickup address is required</div>
              <div *ngIf="f.pickupAddress.errors.minlength && f.pickupAddress.invalid">* Pickup address must have at least 5 characters</div>
              <div *ngIf="f.pickupAddress.errors.maxlength && f.pickupAddress.invalid">* Pickup address can't have more than 30 characters</div>
            </div>


            <p id = "formtext"> Delivery Address </p> 
            <ion-item lines="none"  class ="itemform">
             <ion-input formControlName = "deliveryAddress" name = "deliveryAddress" class ="inputClass" id = "deliveryAddressInput" [(ngModel)]="deliveryAddress" type = "text" placeholder = "Delivery Address" required></ion-input>
            </ion-item>

            <div  style="color:rgb(250, 146, 146); font-size: 12px;" class = "error-messages" *ngIf=" f.deliveryAddress.errors">
              <div *ngIf="f.deliveryAddress.errors.required && (f.deliveryAddress.touched || f.deliveryAddress.dirty)">* Delivery address is required</div>
              <div *ngIf="f.deliveryAddress.errors.minlength && f.deliveryAddress.invalid">* Delivery address must have at least 5 characters</div>
              <div *ngIf="f.deliveryAddress.errors.maxlength && f.deliveryAddress.invalid">* Delivery address can't have more than 30 characters</div>
            </div>

            <p id = "formtext"> Receiver's Full Name </p> 
            <ion-item lines="none"  class ="itemform">
              <ion-input formControlName = "receiverName" name = "receiverName" class ="inputClass" id = "receiverName" [(ngModel)]="receiverName" type = "text" placeholder = "Receiver's Full Name" required></ion-input>
            </ion-item>

            <div  style="color:rgb(250, 146, 146); font-size: 12px;" class = "error-messages" *ngIf=" f.receiverName.errors">
              <div *ngIf="f.receiverName.errors.required && (f.receiverName.touched || f.receiverName.dirty)">* Receiver's full name is required</div>
              <div *ngIf="f.receiverName.errors.minlength && f.receiverName.invalid">* Receiver's full name must have at least 3 characters</div>
              <div *ngIf="f.receiverName.errors.maxlength && f.receiverName.invalid">* Receiver's full name can't have more than 30 characters</div>
            </div>

            <p id = "formtext">Receiver's Phone Number </p> 
            <ion-item lines="none"  class ="itemform">
              <ion-input formControlName = "receiverPhoneNumber" name = "receiverPhoneNumber" class ="inputClass" id = "receiverPhoneNumber" [(ngModel)]="receiverPhoneNumber" type = "text" placeholder = "Receiver's Phone Number" required></ion-input>
            </ion-item>

            <div  style="color:rgb(250, 146, 146); font-size: 12px;" class = "error-messages" *ngIf=" f.receiverPhoneNumber.errors">
              <div *ngIf="f.receiverPhoneNumber.errors.required && (f.receiverPhoneNumber.touched || f.receiverPhoneNumber.dirty)">* Receiver's phone number is required</div>
              <div *ngIf="f.receiverPhoneNumber.errors.minlength && f.receiverPhoneNumber.invalid">* Receiver's phone number must have at least 7 characters</div>
              <div *ngIf="f.receiverPhoneNumber.errors.maxlength && f.receiverPhoneNumber.invalid">* Receiver's phone number can't have more than 30 characters</div>
            </div>

            <p id = "formtext">Package's Weight </p> 
            <ion-item lines="none"  class ="itemform">
              <ion-input formControlName = "packageWeight" name = "packageWeight" class ="inputClass" id = "packageWeight" [(ngModel)]="packageWeight" type = "text" placeholder="Package's Weight" required></ion-input>
            </ion-item>

            <div  style="color:rgb(250, 146, 146); font-size: 12px;" class = "error-messages" *ngIf=" f.packageWeight.errors">
              <div *ngIf="f.packageWeight.errors.required && (f.packageWeight.touched || f.packageWeight.dirty)">* Package's weight in kg is required</div>
              <div *ngIf="f.packageWeight.errors.minlength && f.packageWeight.invalid">* Package's weight must have at least 1 characters</div>
              <div *ngIf="f.packageWeight.errors.maxlength && f.packageWeight.invalid">* Package's weight can't have more than 30 characters</div>
            </div>

            <p id = "formtext"> Package's Length </p>
            <ion-item lines="none" class ="itemform">
              <ion-input formControlName = "packageLength" name = "packageLength" class ="inputClass" id = "packageLength" [(ngModel)]="packageLength" type = "text" placeholder = "Package's Length" required></ion-input>
            </ion-item>

            <div  style="color:rgb(250, 146, 146); font-size: 12px;" class = "error-messages" *ngIf=" f.packageLength.errors">
              <div *ngIf="f.packageLength.errors.required && (f.packageLength.touched || f.packageLength.dirty)">* Package's length in cm is required</div>
              <div *ngIf="f.packageLength.errors.minlength && f.packageLength.invalid">* Package's length must have at least 1 characters</div>
              <div *ngIf="f.packageLength.errors.maxlength && f.packageLength.invalid">* Package's length can't have more than 30 characters</div>
            </div>

            <p id = "formtext"> Package's Height </p>
            <ion-item lines="none" class ="itemform">
              <ion-input formControlName = "packageHeight" name = "packageHeight" class ="inputClass" id = "packageHeight" [(ngModel)]="packageHeight" type = "text" placeholder = "Package's Height" required></ion-input>
            </ion-item>

            <div  style="color:rgb(250, 146, 146); font-size: 12px;" class = "error-messages" *ngIf=" f.packageHeight.errors">
              <div *ngIf="f.packageHeight.errors.required && (f.packageHeight.touched || f.packageHeight.dirty)">* Package's height in cm is required</div>
              <div *ngIf="f.packageHeight.errors.minlength && f.packageHeight.invalid">* Package's height must have at least 1 characters</div>
              <div *ngIf="f.packageHeight.errors.maxlength && f.packageHeight.invalid">* Package's height can't have more than 30 characters</div>
            </div>

            <p id = "formtext"> Package's Width </p>
            <ion-item lines="none" class ="itemform">
              <ion-input formControlName = "packageWidth" name = "packageWidth" class ="inputClass" id = "packageWidth" [(ngModel)]="packageWidth" type = "text" placeholder = "Package's Width" required></ion-input>
            </ion-item>

            <div  style="color:rgb(250, 146, 146); font-size: 12px;" class = "error-messages" *ngIf=" f.packageWidth.errors">
              <div *ngIf="f.packageWidth.errors.required && (f.packageWidth.touched || f.packageWidth.dirty)">* Package's width in cm is required</div>
              <div *ngIf="f.packageWidth.errors.minLength && f.packageWidth.invalid">* Package's width  must have at least 1 characters</div>
              <div *ngIf="f.packageWidth.errors.maxLength && f.packageWidth.invalid">* Package's width  can't have more than 30 characters</div>
            </div>

           </div>
          </form>

          <ion-row>
           <ion-col>
            <p id = "availableTime"> Available Pickup Hours </p> 
            <ion-item *ngFor ="let pickupHour of pickupHours;let index = index;trackBy:trackByIndex;" id ="timeItem" lines="none" color="red">

              <ion-label  id ="timeLabel">  
               <ion-card-content id ="timeContent">
                <ion-item lines="none" class ="timeItem2">
                  <ion-datetime displayFormat="MMMM DD, DDDD" placeholder="Day" 
                    [(ngModel)]="pickupHours[index].pickupDay"
                    [ngModelOptions]="{standalone: true}"
                  ></ion-datetime>
                </ion-item >
                
                <ion-item class= "timeItem2">
                  <ion-datetime displayFormat="HH:mm - " placeholder="Start Hour"
                    [(ngModel)]="pickupHours[index].pickupStartHour"
                    [ngModelOptions]="{standalone: true}"
                  ></ion-datetime>
                  
                  <ion-datetime displayFormat=" HH:mm"  placeholder="End Hour"
                    [(ngModel)]="pickupHours[index].pickupEndHour"
                    [ngModelOptions]="{standalone: true}"
                  ></ion-datetime>
                </ion-item>
            
               </ion-card-content>
              </ion-label>
                  
              <ion-button id = "deletepickuphour" color ="--ion-color-success-shade" item-right slot="start" (click)="deleteHoursForm(selectedpickupHours.id)">
                <ion-icon name="close-circle"></ion-icon>
              </ion-button>
            </ion-item>

            <ion-button id="addpickuphour" color = "grey" (click)="addPickupHour()" type = "submit" >Add pickup time</ion-button>
            <ion-button id="dontAddPackage" color ="red" (click)="dontAddPackage()" type = "submit" expand="block">Cancel </ion-button>
         
          </ion-col>
        </ion-row>
      </ion-card>

      
     </ion-col>
   </ion-row>
  </div>

  <div id ="textDriver" style="display: none">
    <p class = "textP2"> *The driver will also receive your contact information, so he can contact you for needed details </p>
  </div>
 

<!-- EDIT PACKAGE FORM -->
   <!-- <div id = "editPackage" style="display: none;">
      <ion-row>
        <ion-col>
          <ion-card>                
              <ion-item id="addPackageItem" lines="none" color ="red">
                <p class ="count"> {{selectedPackage.number}} </p>
                <ion-label>     
                  <ion-card-header>
                   <ion-card-title style="color: rgb(202, 201, 201);"> {{selectedPackage.name}} </ion-card-title>
                  </ion-card-header>
      
                  <ion-card-content style="color: rgb(202, 201, 201);"> Status: ***status </ion-card-content>
                </ion-label>
      
              </ion-item>
  
           <form novalidate [formGroup] ="addPackageForm" (ngSubmit)="submitForm(form.value)">
            <div padding>
              <p id = "formtext"> Package's Name </p> 
              <ion-item lines="none" class ="itemform">
                <ion-input formControlName = "packageName" name = "packageName" class ="inputClass" id = "nameInput" [(ngModel)]="name" type = "text"  placeholder="Package's Name" value = "{{selectedPackage.name}}" required></ion-input>
              </ion-item>

            <div  style="color:rgb(250, 146, 146); font-size: 12px;" class = "error-messages" *ngIf=" f.packageName.errors">
              <div *ngIf="f.packageName.errors.required && (f.packageName.touched || f.packageName.dirty)">* Package's name is required</div>
              <div *ngIf="f.packageName.errors.minlength && f.packageName.invalid">* Package's name must have at least 3 characters</div>
              <div *ngIf="f.packageName.errors.maxlength && f.packageName.invalid">* Package's name can't have more than 30 characters</div>
            </div>
  
              <p id = "formtext"> Pickup Address</p> 
              <ion-item lines="none" class ="itemform">
                <ion-input formControlName = "pickupAddress" name = "pickupAddress" class ="inputClass"  id = "pickupAddressInput" [(ngModel)]="pickupAddress" type = "text" placeholder="Pickup Address" value ="{{selectedPackage.pickupAddress}}" required></ion-input>
              </ion-item>

            <div  style="color:rgb(250, 146, 146); font-size: 12px;" class = "error-messages" *ngIf=" f.pickupAddress.errors">
              <div *ngIf="f.pickupAddress.errors.required && (f.pickupAddress.touched || f.pickupAddress.dirty)">* Pickup address is required</div>
              <div *ngIf="f.pickupAddress.errors.minlength && f.pickupAddress.invalid">* Pickup address must have at least 5 characters</div>
              <div *ngIf="f.pickupAddress.errors.maxlength && f.pickupAddress.invalid">* Pickup address can't have more than 30 characters</div>
            </div>

  
              <p id = "formtext"> Delivery Address </p> 
              <ion-item lines="none"  class ="itemform">
               <ion-input formControlName = "deliveryAddress" name = "deliveryAddress" class ="inputClass"  id = "deliveryAddressInput" [(ngModel)]="deliveryAddress" type = "text" placeholder="Delivery Address" value ="{{selectedPackage.deliveryAddress}}" required></ion-input>
              </ion-item>

            <div  style="color:rgb(250, 146, 146); font-size: 12px;" class = "error-messages" *ngIf=" f.deliveryAddress.errors">
              <div *ngIf="f.deliveryAddress.errors.required && (f.deliveryAddress.touched || f.deliveryAddress.dirty)">* Delivery address is required</div>
              <div *ngIf="f.deliveryAddress.errors.minlength && f.deliveryAddress.invalid">* Delivery address must have at least 5 characters</div>
              <div *ngIf="f.deliveryAddress.errors.maxlength && f.deliveryAddress.invalid">* Delivery address can't have more than 30 characters</div>
            </div>
  
              <p id = "formtext"> Receiver's Full Name </p> 
              <ion-item lines="none"  class ="itemform">
                <ion-input formControlName = "receiverName" name = "receiverName" class ="inputClass" id = "receiverName" [(ngModel)]="receiverName" type = "text" placeholder="Receiver's Name" value ="{{selectedPackage.receiverName}}" required></ion-input>
              </ion-item>

            <div  style="color:rgb(250, 146, 146); font-size: 12px;" class = "error-messages" *ngIf=" f.receiverName.errors">
              <div *ngIf="f.receiverName.errors.required && (f.receiverName.touched || f.receiverName.dirty)">* Receiver's full name is required</div>
              <div *ngIf="f.receiverName.errors.minlength && f.receiverName.invalid">* Receiver's full name must have at least 3 characters</div>
              <div *ngIf="f.receiverName.errors.maxlength && f.receiverName.invalid">* Receiver's full name can't have more than 30 characters</div>
            </div>
  
              <p id = "formtext">Receiver's Phone Number </p> 
              <ion-item lines="none"  class ="itemform">
                <ion-input formControlName = "receiverPhoneNumber" name = "receiverPhoneNumber" class ="inputClass" id = "receiverPhoneNumber" [(ngModel)]="receiverPhoneNumber" type = "text" placeholder="Receiver's Phone Number" value ="{{selectedPackage.receiverPhoneNumber}}" required></ion-input>
              </ion-item>

            <div  style="color:rgb(250, 146, 146); font-size: 12px;" class = "error-messages" *ngIf=" f.receiverPhoneNumber.errors">
              <div *ngIf="f.receiverPhoneNumber.errors.required && (f.receiverPhoneNumber.touched || f.receiverPhoneNumber.dirty)">* Receiver's phone number is required</div>
              <div *ngIf="f.receiverPhoneNumber.errors.minlength && f.receiverPhoneNumber.invalid">* Receiver's phone number must have at least 7 characters</div>
              <div *ngIf="f.receiverPhoneNumber.errors.maxlength && f.receiverPhoneNumber.invalid">* Receiver's phone number can't have more than 30 characters</div>
            </div>

             <p id = "formtext">Package's Weight </p> 
              <ion-item lines="none"  class ="itemform">
                <ion-input formControlName = "packageWeight" name = "packageWeight"  class ="inputClass" id = "packageWeight" [(ngModel)]="packageWeight" type = "text" placeholder="Package's Weight" value ="{{selectedPackage.packageWeight}}" required></ion-input>
              </ion-item>

            <div  style="color:rgb(250, 146, 146); font-size: 12px;" class = "error-messages" *ngIf=" f.packageWeight.errors">
              <div *ngIf="f.packageWeight.errors.required && (f.packageWeight.touched || f.packageWeight.dirty)">* Package's weight is required</div>
              <div *ngIf="f.packageWeight.errors.minlength && f.packageWeight.invalid">* Package's weight must have at least 1 characters</div>
              <div *ngIf="f.packageWeight.errors.maxlength && f.packageWeight.invalid">* Package's weight can't have more than 30 characters</div>
            </div>

              <p id = "formtext"> Package's Length </p>
              <ion-item lines="none" class ="itemform">
                <ion-input formControlName = "packageLength" name = "packageLength"  class ="inputClass" id = "packageLength" [(ngModel)]="packageLength" type = "text"  placeholder="Package's Length" value ="{{selectedPackage.packageLength}}" required></ion-input>
              </ion-item>

            <div  style="color:rgb(250, 146, 146); font-size: 12px;" class = "error-messages" *ngIf=" f.packageLength.errors">
              <div *ngIf="f.packageLength.errors.required && (f.packageLength.touched || f.packageLength.dirty)">* Package's length is required</div>
              <div *ngIf="f.packageLength.errors.minlength && f.packageLength.invalid">* Package's length must have at least 1 characters</div>
              <div *ngIf="f.packageLength.errors.maxlength && f.packageLength.invalid">* Package's length can't have more than 30 characters</div>
            </div>

              <p id = "formtext"> Package's Height </p>
              <ion-item lines="none" class ="itemform">
                <ion-input formControlName = "packageHeight" name = "packageHeight" class ="inputClass" id = "packageHeight" [(ngModel)]="packageHeight" type = "text" placeholder="Package's Height" value ="{{selectedPackage.packageHeight}}" required></ion-input>
              </ion-item>

            <div  style="color:rgb(250, 146, 146); font-size: 12px;" class = "error-messages" *ngIf=" f.packageHeight.errors">
              <div *ngIf="f.packageHeight.errors.required && (f.packageHeight.touched || f.packageHeight.dirty)">* Package's height is required</div>
              <div *ngIf="f.packageHeight.errors.minlength && f.packageHeight.invalid">* Package's height must have at least 1 characters</div>
              <div *ngIf="f.packageHeight.errors.maxlength && f.packageHeight.invalid">* Package's height can't have more than 30 characters</div>
            </div>

              <p id = "formtext"> Package's Width </p>
              <ion-item lines="none" class ="itemform">
                <ion-input formControlName = "packageWidth" name = "packageWidth"  class ="inputClass" id = "packageWidth" [(ngModel)]="packageWidth" type = "text" placeholder="Package's Width" value ="{{selectedPackage.packageWidth}}" required></ion-input>
              </ion-item>
 
            <div  style="color:rgb(250, 146, 146); font-size: 12px;" class = "error-messages" *ngIf=" f.packageWidth.errors">
              <div *ngIf="f.packageWidth.errors.required && (f.packageWidth.touched || f.packageWidth.dirty)">* Package's width  is required</div>
              <div *ngIf="f.packageWidth.errors.minLength && f.packageWidth.invalid">* Package's width  must have at least 1 characters</div>
              <div *ngIf="f.packageWidth.errors.maxLength && f.packageWidth.invalid">* Package's width  can't have more than 30 characters</div>
            </div>
             </div>
            </form>
  
            <ion-row>
             <ion-col>
              <p id = "availableTime"> Available Pickup Hours </p> 

              <ion-item *ngFor ="let pickupHour of selectedPackage.pickupHours" id ="timeItem" lines="none" color="red">
  
                <ion-label  id ="timeLabel">  
                 <ion-card-content id ="timeContent">

                  <ion-item lines="none" class ="timeItem2">
                    <ion-datetime displayFormat="MMMM DD, DDDD" placeholder="Day" value = "{{pickupHour.pickupDay}}"></ion-datetime>
                  </ion-item >
                  <ion-item class= "timeItem2">
                    <ion-datetime displayFormat="HH:mm - " placeholder="Start Hour" value = "{{pickupHour.pickupStartHour}}"></ion-datetime>
                    <ion-datetime displayFormat=" HH:mm"   placeholder="End Hour" value = "{{pickupHour.pickupEndHour}}"></ion-datetime>
                  </ion-item>

                 </ion-card-content>
                </ion-label>
                    
                <ion-button id = "deletepickuphour" color ="--ion-color-success-shade" item-right slot="start" (click)="addHoursForm()">
                  <ion-icon name="close-circle"></ion-icon>
                </ion-button>
              </ion-item>
  
              <ion-button id="addpickuphour" color = "grey" (click)="addPickupHour()" type = "submit" >Add pickup time</ion-button>
              <ion-button id="dontSaveEditPackage" color ="red" (click)="dontSaveEditPackage()" type = "submit" expand="block">Cancel </ion-button>
           
            </ion-col>
          </ion-row>
        </ion-card>
  
        
       </ion-col>
     </ion-row>
    </div> -->
  
    <div id ="textDriver2" style="display: none">
      <p class = "textP2"> *The driver will also receive your contact information, so he can contact you for needed details </p>
    </div>

 </ion-grid>

 <div id="space"></div>
</ion-content>

  
<ion-footer no-border id="footer">
    <ion-toolbar id="addbutton">
      <div id ="addButton" padding>
        <ion-button id="addpackage" color ="--ion-color-success-shade" (click)="addPackageButton()" expand="block" size="large"  type = "submit" expand="block" value="Add Package">Add Package</ion-button>
      </div>
  
    </ion-toolbar>
  </ion-footer>